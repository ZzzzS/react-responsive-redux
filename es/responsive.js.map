{"version":3,"sources":["../src/responsive.js"],"names":["React","PropTypes","connect","mobileParser","setMobileDetect","defaultSizes","Resp","props","onReSize","bind","mobileDetect","options","headers","navigator","userAgent","mobileDetectChange","window","addEventListener","removeEventListener","width","document","body","clientWidth","desktop","tablet","phone","mobile","children","Children","only","PureComponent","propTypes","element","isRequired","func","Responsive","dispatch","data"],"mappings":";;;;;;AAGA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,YAAT,QAA6B,UAA7B;AACA,SAASC,eAAT,QAAgC,SAAhC;AACA,SAASC,YAAT,QAA6B,YAA7B;;IAEMC,I;;;AACJ,gBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,yGAAMA,KAAN;AACA,UAAKC,QAAL,GAAgB,MAAKA,QAAL,CAAcC,IAAd,+BAAhB;AACA,UAAKC,YAAL,GAAoB,IAApB;AAHiB;AAIlB;;;;yCAEoB;AACnB,UAAMC,UAAUR,aAAa;AAC3BS,iBAAS;AACP,wBAAcC,UAAUC;AADjB;AADkB,OAAb,CAAhB;AADmB,UAOXC,kBAPW,GAOY,KAAKR,KAPjB,CAOXQ,kBAPW;AAQnBA,yBAAmBJ,OAAnB;;AAEA,UAAIK,MAAJ,EAAY;AACVA,eAAOC,gBAAP,CAAwB,QAAxB,EAAkC,KAAKT,QAAvC;AACD;AACF;;;2CAEsB;AACrB,UAAIQ,MAAJ,EAAY;AACVA,eAAOE,mBAAP,CAA2B,QAA3B,EAAqC,KAAKV,QAA1C;AACD;AACF;;;+BAEU;AAAA,UACDO,kBADC,GACsB,KAAKR,KAD3B,CACDQ,kBADC;AAET,UAAMI,QAAQC,SAASC,IAAT,CAAcC,WAA5B;AAEA,UAAIC,OAAJ;AACA,UAAIC,MAAJ;AACA,UAAIC,KAAJ;AACA,UAAIf,YAAJ;;AAEA,UAAIS,QAAQd,aAAamB,MAAzB,EAAiC;AAC/BD,kBAAU,IAAV;AACAb,uBAAe,SAAf;AACD,OAHD,MAGO,IAAIS,QAAQd,aAAaoB,KAArB,IAA8BN,SAASd,aAAamB,MAAxD,EAAgE;AACrEA,iBAAS,IAAT;AACAd,uBAAe,QAAf;AACD,OAHM,MAGA,IAAIS,SAASd,aAAaoB,KAA1B,EAAiC;AACtCA,gBAAQ,IAAR;AACAf,uBAAe,OAAf;AACD;;AAED,UAAMgB,SAASF,UAAUC,KAAzB;;AAEA,UAAIf,iBAAiB,KAAKA,YAA1B,EAAwC;AACtCK,2BAAmB;AACjBQ,mBAAS,CAAC,CAACA,OADM;AAEjBG,kBAAQ,CAAC,CAACA,MAFO;AAGjBF,kBAAQ,CAAC,CAACA,MAHO;AAIjBC,iBAAO,CAAC,CAACA;AAJQ,SAAnB;AAMD;;AAED,WAAKf,YAAL,GAAoBA,YAApB;AACD;;;6BAEQ;AAAA,UACCiB,QADD,GACc,KAAKpB,KADnB,CACCoB,QADD;AAEP,aACE3B,MAAM4B,QAAN,CAAeC,IAAf,CAAoBF,QAApB,CADF;AAGD;;;;EAnEgB3B,MAAM8B,a;;AAsEzBxB,KAAKyB,SAAL,GAAiB;AACfJ,YAAU1B,UAAU+B,OAAV,CAAkBC,UADb;AAEflB,sBAAoBd,UAAUiC,IAAV,CAAeD;AAFpB,CAAjB;AAKA,OAAO,IAAME,aAAajC,QACxB;AAAA,SAAO,EAAP;AAAA,CADwB,EAExB;AAAA,SAAa;AACXa,wBAAoB;AAAA,aAAQqB,SAAShC,gBAAgBiC,IAAhB,CAAT,CAAR;AAAA;AADT,GAAb;AAAA,CAFwB,EAKxB/B,IALwB,CAAnB","file":"responsive.js","sourcesContent":["/**\n * Created by zzzz on 17/01/2018.\n */\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { mobileParser } from './parser'\nimport { setMobileDetect } from './redux'\nimport { defaultSizes } from './defaults'\n\nclass Resp extends React.PureComponent {\n  constructor(props) {\n    super(props)\n    this.onReSize = this.onReSize.bind(this)\n    this.mobileDetect = null\n  }\n\n  componentWillMount() {\n    const options = mobileParser({\n      headers: {\n        'user-agent': navigator.userAgent,\n      },\n    })\n\n    const { mobileDetectChange } = this.props\n    mobileDetectChange(options)\n\n    if (window) {\n      window.addEventListener('resize', this.onReSize)\n    }\n  }\n\n  componentWillUnmount() {\n    if (window) {\n      window.removeEventListener('resize', this.onReSize)\n    }\n  }\n\n  onReSize() {\n    const { mobileDetectChange } = this.props\n    const width = document.body.clientWidth\n\n    let desktop\n    let tablet\n    let phone\n    let mobileDetect\n\n    if (width > defaultSizes.tablet) {\n      desktop = true\n      mobileDetect = 'desktop'\n    } else if (width > defaultSizes.phone && width <= defaultSizes.tablet) {\n      tablet = true\n      mobileDetect = 'tablet'\n    } else if (width <= defaultSizes.phone) {\n      phone = true\n      mobileDetect = 'phone'\n    }\n\n    const mobile = tablet || phone\n\n    if (mobileDetect !== this.mobileDetect) {\n      mobileDetectChange({\n        desktop: !!desktop,\n        mobile: !!mobile,\n        tablet: !!tablet,\n        phone: !!phone,\n      })\n    }\n\n    this.mobileDetect = mobileDetect\n  }\n\n  render() {\n    const { children } = this.props\n    return (\n      React.Children.only(children)\n    )\n  }\n}\n\nResp.propTypes = {\n  children: PropTypes.element.isRequired,\n  mobileDetectChange: PropTypes.func.isRequired,\n}\n\nexport const Responsive = connect(\n  () => ({}),\n  dispatch => ({\n    mobileDetectChange: data => dispatch(setMobileDetect(data)),\n  }),\n)(Resp)\n"]}